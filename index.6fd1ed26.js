var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=r),r.register;var i=(r("krGWQ"),r("krGWQ"));const{API_KEY:s,BASE_URL_ALL:n,BASE_URL_GENRE:l,cards:o}=i.default;async function c(e=1){o.classList.add("loader");try{let t=await fetch(`${n}?api_key=${s}&page=${e}`);if(!t.ok)throw Error(t.statusText);let a=await t.json(),r=await Promise.all(a.results.map(async e=>{try{let t=await fetch(`${l}${e.id}?api_key=${s}&include_image_language=en,null`);if(!t.ok)throw Error(t.statusText);return await t.json()}catch(e){console.log("Error fetching genre information:",e)}}));return o.classList.remove("loader"),r}catch(e){console.log("Error fetching all movies:",e)}}var i=r("krGWQ");const{cards:d}=i.default;async function p(e){try{let t=e.filter(e=>{if(e&&null!==e.poster_path)return e}).map(({title:e,poster_path:t,genres:a,release_date:r,id:i})=>{let s=a.map(e=>e.name).join(", "),n=r.slice(0,4);return`
              <li class="page-item" data-id="${i}">
                 <a href="#" class="page-item__link">
                 <img src="https://image.tmdb.org/t/p/w500${t}">
                 <div class="page-description">
                     <h2 class="page-description__title">${e}</h2>
                     <p class="page-description__podscription">${s} <span>| ${n}</span></p>
                 </div>
                 </a>
              </li>`}).join(" ");d.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}}var i=r("krGWQ"),u=r("1GAPJ"),i=r("krGWQ");const{cards:f}=i.default;function g(){f.innerHTML=""}var h=r("9Uhgk");const{formSubmit:m,BASE_URL_QUERY:_,API_KEY:y,BASE_URL_GENRE:w,cards:$,pagination:v}=i.default;(0,h.default)();var i=r("krGWQ");const{API_KEY:E,BASE_URL_ALL:L,arrowRight:k,arrowLeft:b}=i.default;async function A(e=1){let t=await fetch(`${L}?api_key=${E}&page=${e}`),{totalPageCount:a,currentPage:r,pageNumbers:i,maxPageBtn:s,nearEdgeThreshold:n,pageNumbersHtml:l}={totalPageCount:(await t.json()).total_pages,currentPage:e,pageNumbers:[],maxPageBtn:9,nearEdgeThreshold:3,pageNumbersHtml:document.querySelector(".js-list")};if(a<=s)for(let e=1;e<=a;e++)i.push(e);else if(r<=n+1){for(let e=1;e<=s-2;e+=1)i.push(e);i.push("..."),i.push(a)}else if(r>=a-n){i.push(1),i.push("...");for(let e=a-s+3;e<=a;e+=1)i.push(e)}else{i.push(1),i.push("...");for(let e=r-n;e<=r+n;e+=1)i.push(e);i.push("..."),i.push(a)}let o=i.map(t=>{if("..."===t)return`<span>${t}</span>`;{let a=e===t?"isactive":"";return`<button class="js-page-number ${a}" data-page="${t}">${t}</button>`}}).join("");l.innerHTML=o,k.disabled=e===a,b.disabled=1===e,document.querySelectorAll(".js-page-number").forEach(t=>{t.addEventListener("click",async()=>{let a=parseInt(t.dataset.page);console.log(a),isNaN(a)||(g(),p(await c(e)),A(a))})})}var j=r("4aAp5");let N=1;const{arrowRight:R,arrowLeft:P}=i.default;!async function(){let e=await c(N);await p(e),A()}();const{handleLeftClick:T,handleRightClick:x}={handleRightClick:async()=>{N+=1;try{g();let e=await c(N);p(e),A(N)}catch(e){console.error(e)}},handleLeftClick:async()=>{N-=1;try{g();let e=await c(N);p(e),A(N)}catch(e){console.error(e)}}};P.addEventListener("click",T),R.addEventListener("click",x),m.addEventListener("submit",async e=>{e.preventDefault();let t=e.currentTarget.serchQuary.value.trim();if(!t){(0,u.Notify).info("You have not entered anything");return}$.classList.add("loader");try{let e=await fetch(`${_}?api_key=${y}&query=${t}`),a=await e.json();if(0===a.total_pages||0===a.total_results){(0,u.Notify).info("Nothing found for your request");return}{let e=await a.results.filter(e=>{if(e&&null!==e.poster_path)return e}),t=await e.map(({id:e})=>e),r=await Promise.all(t.map(async e=>{let t=await fetch(`${w}${e}?api_key=${y}`),{title:a,poster_path:r,release_date:i,genres:s}=await t.json(),n=s.map(({name:e})=>e).join(" "),l=i.slice(0,4);return`
              <li class="page-item" data-id="${e}">
                  <a href="#" class="page-item__link">
                      <img class="page-item__img" src="https://image.tmdb.org/t/p/w500${r}" alt="${a}"/>
                      <div class="page-description">
                          <h2 class="page-description__title">${a}</h2>
                          <p class="page-description__podscription">${n} ${l}</p>
                      </div>
                  </a>
              </li>`}));(0,u.Notify).success(`According to your request
      found ${a.results.length} films`),g(),v.style.display="none",$.innerHTML=r.join(" ")}}catch(e){console.error("An error occurred while delivering data",console.error())}finally{$.classList.remove("loader")}}),(0,j.default)();
//# sourceMappingURL=index.6fd1ed26.js.map
